        <div class="info-block">
          <div class="info-label">Ø³Ø¨Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„</div>
          <div class="info-input">
            <strong class="english-numbers">srv</strong>
            <span class="copy-icon" onclick="copyText(this,'srv')">
              <img src="https://cdn-icons-png.flaticon.com/512/60/60990.png" alt="copy" />
            </span>
            <span class="copied-text">ØªÙ… Ø§Ù„Ù†Ø³Ø®</span>
          </div>
        </div>
        <div class="info-block">
          <div class="info-label">Ø§Ù„Ù…Ø¨Ù„Øº (Min: 100.00 MAD / Max: 5000.00 MAD)</div>
          <div class="info-input">
            <input type="number" name="amount" class="english-numbers" min="100" max="5000" placeholder="200.00" required>
          </div>
        </div>
        <div class="info-block">
          <div class="info-label">NOM e prÃ©nom / Ø§Ù„Ø¥Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ:</div>
          <div class="info-input">
            <input type="text" name="sender_name" required>
          </div>
        </div>
        <div class="info-block" style="flex-direction: column; align-items: flex-start;">
          <span style="margin-bottom: 10px;">preuve de transaction (photo) ØªÙ†Ø¨ÙŠÙ‡, Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© Ù„Ù„Ø­ÙˆØ§Ù„Ø© Ø§Ù„Ù…ØµØ±ÙÙŠØ© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©:</span>
          <div class="upload-wrapper">
            <img id="preview" class="preview-image" />
            <div class="upload-section">
              <label for="proof">+</label>
              <input type="file" id="proof" name="proof" accept=".jpg,.jpeg,.png" required>
            </div>
          </div>
        </div>
        <div class="note">(.jpg, .jpeg, .png, .pdf. Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ù„Ù Ù‡Ùˆ 20 Ù…ÙŠØºØ§ Ø¨Ø§ÙŠØª)</div>
        <button type="submit" class="submit-btn" id="submitBtn">Ø§Ù„ØªØ£ÙƒÙŠØ¯</button>
      </form>
    </div>
  </div>

  <input type="text" id="hiddenCopyInput" style="position:absolute;top:-9999px;left:-9999px;" readonly />

  <script>
    function copyText(el, val) {
      navigator.clipboard.writeText(val).then(() => {
        const msg = el.nextElementSibling;
        msg.style.display = 'inline';
        setTimeout(() => msg.style.display = 'none', 1200);
      });
    }

    document.getElementById('proof').addEventListener('change', function(e) {
      const file = e.target.files[0];
      const preview = document.getElementById('preview');
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = ev => {
          preview.src = ev.target.result;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        preview.src = '';
        preview.style.display = 'none';
      }
    });

    const logo = document.querySelector('.logo-box img');
    ['mousedown','touchstart'].forEach(evt => logo.addEventListener(evt, () => logo.classList.add('active')));
    ['mouseup','mouseleave','touchend'].forEach(evt => logo.addEventListener(evt, () => logo.classList.remove('active')));

    // ğŸ”’ Ø¯Ø§Ù„Ø© Ù„ÙÙƒ ØªØ´ÙÙŠØ± Ø±Ø§Ø¨Ø· Apps Script
    function getSecureScriptURL() {
      return atob("aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J5X3lQZ1hDQ0ZwdkdSUTREb2ExRk1mSFM0alhkNXk4cC0tZlBRQUZuQURjRkk2SUN2ZlBwNVd0Wmp0MkdqcVh6b25lUS9leGVj");
    }

    document.getElementById("transferForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const form = e.target;
      const amount = form.amount.value.trim();
      const fullname = form.sender_name.value.trim();
      const file = document.getElementById("proof").files[0];
      const submitBtn = document.getElementById("submitBtn");

      if (!file || !fullname || !amount) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©.");
        return;
      }

      submitBtn.disabled = true;
      const originalText = submitBtn.innerText;
      submitBtn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

      try {
        const reader = new FileReader();
        reader.onloadend = async function() {
          const imageBase64 = reader.result;
          const response = await fetch(getSecureScriptURL(), {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
            body: new URLSearchParams({ amount, fullname, imageBase64 })
          });
          if (response.ok) {
            window.location.replace("al-barid-depo.html");
          } else {
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            submitBtn.innerText = originalText;
            submitBtn.disabled = false;
          }
        };
        reader.readAsDataURL(file);
      } catch (err) {
        alert("ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");
        console.error(err);
        submitBtn.innerText = originalText;
        submitBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
        <div class="info-block">
          <div class="info-label">Ø³Ø¨Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„</div>
          <div class="info-input">
            <strong class="english-numbers">srv</strong>
            <span class="copy-icon" onclick="copyText(this,'srv')">
              <img src="https://cdn-icons-png.flaticon.com/512/60/60990.png" alt="copy" />
            </span>
            <span class="copied-text">ØªÙ… Ø§Ù„Ù†Ø³Ø®</span>
          </div>
        </div>
        <div class="info-block">
          <div class="info-label">Ø§Ù„Ù…Ø¨Ù„Øº (Min: 100.00 MAD / Max: 5000.00 MAD)</div>
          <div class="info-input">
            <input type="number" name="amount" class="english-numbers" min="100" max="5000" placeholder="200.00" required>
          </div>
        </div>
        <div class="info-block">
          <div class="info-label">NOM e prÃ©nom / Ø§Ù„Ø¥Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ:</div>
          <div class="info-input">
            <input type="text" name="sender_name" required>
          </div>
        </div>
        <div class="info-block" style="flex-direction: column; align-items: flex-start;">
          <span style="margin-bottom: 10px;">preuve de transaction (photo) ØªÙ†Ø¨ÙŠÙ‡, Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© Ù„Ù„Ø­ÙˆØ§Ù„Ø© Ø§Ù„Ù…ØµØ±ÙÙŠØ© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©:</span>
          <div class="upload-wrapper">
            <img id="preview" class="preview-image" />
            <div class="upload-section">
              <label for="proof">+</label>
              <input type="file" id="proof" name="proof" accept=".jpg,.jpeg,.png" required>
            </div>
          </div>
        </div>
        <div class="note">(.jpg, .jpeg, .png, .pdf. Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ù„Ù Ù‡Ùˆ 20 Ù…ÙŠØºØ§ Ø¨Ø§ÙŠØª)</div>
        <button type="submit" class="submit-btn" id="submitBtn">Ø§Ù„ØªØ£ÙƒÙŠØ¯</button>
      </form>
    </div>
  </div>

  <input type="text" id="hiddenCopyInput" style="position:absolute;top:-9999px;left:-9999px;" readonly />

  <script>
    function copyText(el, val) {
      navigator.clipboard.writeText(val).then(() => {
        const msg = el.nextElementSibling;
        msg.style.display = 'inline';
        setTimeout(() => msg.style.display = 'none', 1200);
      });
    }

    document.getElementById('proof').addEventListener('change', function(e) {
      const file = e.target.files[0];
      const preview = document.getElementById('preview');
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = ev => {
          preview.src = ev.target.result;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        preview.src = '';
        preview.style.display = 'none';
      }
    });

    const logo = document.querySelector('.logo-box img');
    ['mousedown','touchstart'].forEach(evt => logo.addEventListener(evt, () => logo.classList.add('active')));
    ['mouseup','mouseleave','touchend'].forEach(evt => logo.addEventListener(evt, () => logo.classList.remove('active')));

    function getSecureScriptURL() {
      return atob("aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J5X3lQZ1hDQ0ZwdkdSUTREb2ExRk1mSFM0alhkNXk4cC0tZlBRQUZuQURjRkk2SUN2ZlBwNVd0Wmp0MkdqcVh6b25lUS9leGVj");
    }

    document.getElementById("transferForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const form = e.target;
      const amount = form.amount.value.trim();
      const fullname = form.sender_name.value.trim();
      const file = document.getElementById("proof").files[0];
      const submitBtn = document.getElementById("submitBtn");

      if (!file || !fullname || !amount) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©.");
        return;
      }

      submitBtn.disabled = true;
      const originalText = submitBtn.innerText;
      submitBtn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

      try {
        const reader = new FileReader();
        reader.onloadend = async function() {
          const imageBase64 = reader.result;
          const response = await fetch(getSecureScriptURL(), {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
            body: new URLSearchParams({ amount, fullname, imageBase64 })
          });
          if (response.ok) {
            window.location.replace("al-barid-depo.html");
          } else {
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            submitBtn.innerText = originalText;
            submitBtn.disabled = false;
          }
        };
        reader.readAsDataURL(file);
      } catch (err) {
        alert("ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");
        console.error(err);
        submitBtn.innerText = originalText;
        submitBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
